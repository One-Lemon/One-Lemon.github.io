<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
    <meta name="keywords" content="JavaScript,Vue,React,小程序,前端,Node">
  
  
    <meta name="description" content="静待一树花开，盼你叶落归来。">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    React基础 |
    
    oneQiu Blog</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="oneQiu Blog" type="application/atom+xml">
</head>


<body>
  <main class="content">
    <section class="outer">
  <article id="post-React基础" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h1 class="article-title" itemprop="name">
      React基础
    </h1>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2018/08/17/React%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2018-08-17T00:57:44.000Z" itemprop="datePublished">2018-08-17</time>
</a>
                            
                    </div>
                    

                        
                            
    <div class="tocbot"></div>





                                

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><blockquote>
<p>React 是 Fackbook 当初不满意市面上的 MVC 框架而自主开发的一款 JS 库。严格来说 React 是 V 层。</p>
<ul>
<li>轻量级视图库</li>
<li>虚拟DOM</li>
<li>组件系统</li>
<li>单项数据流</li>
<li>JSX语法</li>
</ul>
<p>注：React 中没有指令系统</p>
</blockquote>
<h2 id="React-使用"><a href="#React-使用" class="headerlink" title="React 使用"></a>React 使用</h2><ul>
<li><p>CDN 引入</p>
<ol>
<li><p>React 核心内容</p>
</li>
<li><p>React-dom 渲染真实 dom 的库</p>
</li>
<li><p>babel 编译 JSX 语法</p>
</li>
</ol>
</li>
<li><p>自己搭建 webpack</p>
</li>
<li><p>使用第三方或者官方的脚手架 <code>npx create-react-app &lt;name&gt;</code></p>
<h2 id="JSX语法"><a href="#JSX语法" class="headerlink" title="JSX语法"></a>JSX语法</h2></li>
</ul>
<ol>
<li>单个根元素</li>
<li>单标签一定要闭合</li>
<li>img 标签的 alt 属性一定要有</li>
<li>标签是小写字母，组件首字母大写</li>
<li>class -&gt; className</li>
<li>label 标签不能使用for ，换成 htmlFor</li>
<li>注释：使用 JS 的注释，并且使用 { } ，例如 <code>{ /* &lt;P&gt; &lt;/P&gt;*/ }</code></li>
<li>style 需要写在对象当中<h2 id="JSX-的差值表达式"><a href="#JSX-的差值表达式" class="headerlink" title="JSX 的差值表达式"></a>JSX 的差值表达式</h2>如何在 JSX 中使用变量？</li>
</ol>
<blockquote>
<p>通过 { 变量 } 的差值表达式来使用变量。</p>
</blockquote>
<ul>
<li>差值表达式中能使简单的单个表达式，不能是语句也不能是条件或者循环语句，可以使用三目运算符。</li>
<li>如果想渲染字符串 <code>str = &#39;&lt;h1&gt;qqq&lt;/h1&gt;&#39;</code> ，需要在标签添加属性 <code>dangerouslySetInnerHTML</code> 接受一个对象的 <code>value{__html: str}</code>。</li>
<li>如果要传递参数到标签属性使用 <code>title = {msg}</code>。</li>
<li><code>{ null } | { undefined } | { ‘’ } | { false }</code>没有内容，不会在页面上渲染任何东西。</li>
</ul>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><h3 id="组件的定义"><a href="#组件的定义" class="headerlink" title="组件的定义"></a>组件的定义</h3><blockquote>
<p>react 没有全局组件的概念，使用哪个组件引入使用<br>组件的函数名直接拿去当标签名<br>React 中组件一共分两种：</p>
</blockquote>
<ol>
<li><p>函数式组件</p>
</li>
<li><p>类组件</p>
<h4 id="函数组件的定义："><a href="#函数组件的定义：" class="headerlink" title="函数组件的定义："></a>函数组件的定义：</h4></li>
<li><p>定义一个函数，然后 return 出来一段 JSX 语法。</p>
</li>
<li><p>函数名字就是组件的名字，首字母大写。</p>
<h4 id="类定义的组件："><a href="#类定义的组件：" class="headerlink" title="类定义的组件："></a>类定义的组件：</h4></li>
<li><p>定义一个类，类名就是组件名 首字母大写。</p>
</li>
<li><p>这个类需要继承于 <code>React.Component</code> 或者 <code>React.PureComponent</code>  基础组件。</p>
</li>
<li><p>类中的 render 函数是必须的，render函数的 return 出来的是一段 JSX 语法。</p>
</li>
</ol>
<p>注：组件的模板内容，如果需要换行去写的话，那么请使用（）包裹起来</p>
<p>没有使用 React，为什么还要去引入?</p>
<blockquote>
<p>JSX 语法是一个语法糖，经过 babel 转换，由于转换出来的代码中使用了 React，所以 React 必须要引入。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; JSX 语法糖</span><br><span class="line">React.createElement(&#39;div&#39;, &#39;参数&#39;, &#39;content&#39;);</span><br></pre></td></tr></table></figure>



<h2 id="组件的-props-属性"><a href="#组件的-props-属性" class="headerlink" title="组件的 props 属性"></a>组件的 props 属性</h2><ul>
<li>props 是个集合， prop 是具体的某一个</li>
<li>Vue 中使用 props 首先需要在组件中定义 props 的选项，而 React 中不需要。</li>
<li>函数组件中所有的 prop 会作为参数传递过来 </li>
<li>类组件所有的 prop 会在 <code>this.props</code> 身上</li>
</ul>
<h3 id="prop-types-校验"><a href="#prop-types-校验" class="headerlink" title="prop-types 校验"></a>prop-types 校验</h3><ol>
<li>安装 prop-types 的模板 <code>npm i --save-dev prop-types</code></li>
<li>引入 prop-types</li>
<li>设置组件的 propTypes 属性</li>
</ol>
<hr>
<p>React 元素 | 虚拟 DOM 元素 | JSX 代码中任意标签 | 通过 React.createElement 创建出来的 JS 对象</p>
<blockquote>
<p>最基本的单元，任何的标签都可以看成是一个 React 元素<br>如何区分 React 元素 与 React 组件的概念<br>组件就是一系列 React 元素的组成<br>什么是元素变量<br>定义一个变量，变量的值是 React 元素<br>React 元素 不是一个可变的对象</p>
</blockquote>
<h2 id="state"><a href="#state" class="headerlink" title="state"></a>state</h2><p>数据绑定的方式有两种</p>
<ol>
<li>props</li>
<li>state    私有属性<h3 id="有状态组件-amp-无状态组件"><a href="#有状态组件-amp-无状态组件" class="headerlink" title="有状态组件 &amp; 无状态组件"></a>有状态组件 &amp; 无状态组件</h3><blockquote>
<p>组件有没有状态，主要看这个组件有没有 state，一般类组件就可以称为有状态组件，函数组件叫无状态组件</p>
</blockquote>
<h3 id="实现自动跟新，需要让组件有state，当-state-发生变化，他就会重新渲染"><a href="#实现自动跟新，需要让组件有state，当-state-发生变化，他就会重新渲染" class="headerlink" title="实现自动跟新，需要让组件有state，当 state 发生变化，他就会重新渲染"></a>实现自动跟新，需要让组件有state，当 state 发生变化，他就会重新渲染</h3></li>
</ol>
<ul>
<li>组件变化方式<ol>
<li>组件接收到的 props 发生改变</li>
<li>组件自身的 state 有了变化</li>
</ol>
</li>
</ul>
<p>defaultValue / defaultChecked默认值  ，单独使用 Value 会报错需要配合onChange使用</p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>挂载</p>
<ul>
<li><p>constructor 构造函数 组件实例化的时候触发，不能在里面 setState。</p>
<ol>
<li>调用父类的构造函数 </li>
<li>super(props) 初始化数据 </li>
<li>绑定this指向</li>
</ol>
</li>
<li><p>componentWillMount()  × 即将过期</p>
</li>
<li><p>static getDerivedStateFromProps()  不常用，能够根据 props 的数据来设置新的 state 数据。</p>
<ol>
<li>初始化 render 之前调用一次</li>
<li>后续数据有变化，重新 render 之前又会调用</li>
<li>不要使用 <code>this.setState</code> -&gt; 哪些不能用？</li>
<li>需要有 return { } | null ，如果是对象，会将 state 合并</li>
</ol>
</li>
<li><p>render () 渲染  默认进来一次，后续如果有更新会再次触发 使用  setState 需要谨慎。</p>
</li>
<li><p>componentDidMount() 组件挂载完成。 </p>
<ol>
<li>获取异步数据</li>
<li>操作 dom</li>
</ol>
</li>
</ul>
<p>更新</p>
<ul>
<li>static getDerivedStateFromProps()</li>
<li>shouldComponentUpdate(nextProps, nextState) 性能优化，这个组件是否需要进行更新渲染？推荐使用 PureComponent 组件继承，两者不能同时存在。需要返回值，返回 true -&gt; 更新生命周期继续执行。false -&gt; 生命周期不执行。</li>
<li>render</li>
<li>getSnapshotBeforeUpdate(prevProps, prevState)   真实 DOM 渲染完成的前一刻</li>
<li>componentDidUpdate(<em>prevProps</em>, <em>prevState</em>, <em>snapshot</em>)  更新完成，对 DOM 进行操作，发送网络请求，但是需要正确进行 if 判断。</li>
</ul>
<p>卸载</p>
<ul>
<li>componentWillUnmount  销毁</li>
</ul>
<h2 id="组件之间的通信"><a href="#组件之间的通信" class="headerlink" title="组件之间的通信"></a>组件之间的通信</h2><h3 id="父-gt-子"><a href="#父-gt-子" class="headerlink" title="父 -&gt; 子"></a>父 -&gt; 子</h3><ul>
<li>通过props</li>
</ul>
<h3 id="子-gt-父"><a href="#子-gt-父" class="headerlink" title="子 -&gt; 父"></a>子 -&gt; 父</h3><ul>
<li>传递方法给子组件，然后子组件调用传递参数</li>
</ul>
<h3 id="兄弟组件"><a href="#兄弟组件" class="headerlink" title="兄弟组件"></a>兄弟组件</h3><ul>
<li><p>状态提升</p>
</li>
<li><p>第三方中央事件管理器(pubsub)</p>
</li>
<li><p>context</p>
<ol>
<li><code>let MyContext = React.createContext()</code> 创建出一个 context</li>
<li><code>MyContext.Prvider</code> 供应商组件</li>
<li><code>MyContext.Consumer</code> 消费者组件  标签中间需要使用函数返回 JSX，这个函数接受一个参数，这个参数就是供应商中的值。</li>
</ol>
<hr>
<ol>
<li>使用上面的步骤</li>
<li>不使用消费者组件，弄成 <code>x.contextType = MyContext</code>。使用 <code>this.context</code> 获取供应商的数据。</li>
</ol>
</li>
<li><p>React 状态管理器</p>
<ul>
<li><p>官方 flux</p>
</li>
<li><p>第三方  Redux</p>
<ol>
<li><p>任何时刻 state 都没有被改变。</p>
</li>
<li><p>生成一个新的 state 去替换旧的 state，Reducers 不能修改，只能通过 return 纯函数。</p>
<p>Tips：纯函数–任何时候都不会修改参数，有相同的入参，一定会产生相同的出参。</p>
</li>
</ol>
</li>
<li><p>第三方  </p>
</li>
</ul>
</li>
</ul>
<p>Tips：children 类似于 Vue 的插槽</p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://yoursite.com/2018/08/17/React%E5%9F%BA%E7%A1%80/" data-id="cka9546zt0003s0ula0otbepo" class="article-share-link">
                                            分享
                                        </a>
                                        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li></ul>

                                    </footer>

    </div>

    
        
  <nav class="article-nav">
    
      <a href="/2018/09/23/React-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="article-nav-link">
        <strong class="article-nav-caption">前一篇</strong>
        <div class="article-nav-title">
          
            React 生命周期
          
        </div>
      </a>
    
    
      <a href="/2018/07/06/Vuex/" class="article-nav-link">
        <strong class="article-nav-caption">后一篇</strong>
        <div class="article-nav-title">Vuex</div>
      </a>
    
  </nav>


            

                
                    
                        
  <div class="gitalk" id="gitalk-container"></div>
  
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

  
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

  
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>

  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: '823ec907ca8a419f4e85',
      clientSecret: '2acb1f1b57621816952ad9608f29ad560637bce1',
      repo: 'gitalk',
      owner: 'oneQiu',
      admin: ['oneQiu'],
      // id: location.pathname,      // Ensure uniqueness and length less than 50
      id: md5(location.pathname),
      distractionFreeMode: false,  // Facebook-like distraction free mode
      pagerDirection: 'last'
    })

  gitalk.render('gitalk-container')
  </script>

                            

</article>
</section>
    <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
    <li><i class="fe fe-bookmark"></i> <span id="busuanzi_value_page_pv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2020 oneQiu Blog</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean" target="_blank" rel="noopener">Ocean</a></li>
    </ul>
  </div>
</footer>

  </main>
  <aside class="sidebar">
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="oneQiu Blog"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">首页</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">归档</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">相册</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">关于</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/links">链接</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




  
<script src="/js/tocbot.min.js"></script>

  <script>
    // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
    tocbot.init({
      tocSelector: '.tocbot',
      contentSelector: '.article-entry',
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      hasInnerContainers: true,
      scrollSmooth: true,
      positionFixedSelector: '.tocbot',
      positionFixedClass: 'is-position-fixed',
      fixedSidebarOffset: 'auto',
    });
  </script>



<script src="/js/ocean.js"></script>


  
  {% include '_third-party/comments/index.swig' %}
  <script type="text/javascript" src="./js/clicklove.js"></script>
  <script type="text/javascript" src="./js/snow.js"></script>
  <!--彩带2.自动飘动-->
  
</body>

</html>